

----STARTUP---- (29 November 2020 15:19:15) as /mnt/sdb5/Ingenieria1/CuisUniversity (copy)/CuisUniversity-4384.image!


TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibrosTest category: 'TusLibros' stamp: 'DS 11/29/2020 15:19:48'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'DS 11/29/2020 15:20:10'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibrosTest methodsFor: 'no messages' stamp: 'DS 11/29/2020 15:19:55'!
test01CreateCartHaveEmptyList

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:20:21'!
test02CannotCreateCartWithInvalidPassword

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [		tusLibros createCartForUser: 1 withPassword: 'bad password'.		]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:20:26'!
test03CannotCreateCartWithUnknownUser

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [		tusLibros createCartForUser: 2 withPassword: 'password'.		]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:20:38' prior: 50880611!
test03CannotCreateCartWithUnknownUser

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [		tusLibros createCartForUser: 2 withPassword: 'password'.		]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:20:48' prior: 50880625!
test03CannotCreateCartWithUnknownUser

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [		tusLibros createCartForUser: 2 withPassword: 'password'.		]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibros methodsFor: 'no messages' stamp: 'DS 11/29/2020 15:21:04'!
initializeWith: anAuthenticator 

	authenticator := anAuthenticator.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:21:10'!
listCartFor: aCartID

	^Dictionary new.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:21:17'!
createCartForUser: anID withPassword: aPassword

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].

! !
!FacadeTusLibros class methodsFor: 'no messages' stamp: 'DS 11/29/2020 15:21:28'!
with: anAuthenticator

	^self new initializeWith: anAuthenticator.! !
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 15:21:33'!
badAuthenticationErrorDescription

	^'Dont exist an user with this password'.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 15:21:36'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 15:21:36'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 15:21:36'!
PASSED!

----STARTUP---- (29 November 2020 15:23:47) as /mnt/sdb5/Ingenieria1/CuisUniversity/CuisUniversity-4384.image!


----End fileIn of /mnt/sdb5/Ingenieria1/CuisUniversity/TusLibros.st----!

----STARTUP---- (29 November 2020 15:29:50) as D:\facultad\Smalltalk\windows64\CuisUniversity-4384.image!


!classRemoval: #Cashier stamp: 'FedericoSabatini 11/29/2020 15:29:53'!
Object subclass: #Cashier
	instanceVariableNames: 'cart catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Cart stamp: 'FedericoSabatini 11/29/2020 15:29:53'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CashierTest stamp: 'FedericoSabatini 11/29/2020 15:29:54'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CartTest stamp: 'FedericoSabatini 11/29/2020 15:29:55'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CartTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:55'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CartTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:55'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CartTest methodsFor: 'setup' stamp: 'FedericoSabatini 11/19/2020 19:20:29' overrides: 16927572!
setUp

	catalog := Dictionary new.
	isbn1 := 100000.
	isbn2 := 100001.! !
!CartTest methodsFor: 'adding' stamp: 'DS 11/19/2020 00:26:21'!
test01NewCartIsEmpty
	
	| aCart |

	aCart := Cart with: catalog.
	
	self assert: aCart isEmpty.! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:21:40'!
test02CartShouldHaveOneOfABookWhenAddingIt
	
	|  aCart |

	catalog at: isbn1 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.
	
	self deny: aCart isEmpty.
	self assert: 1 equals: (aCart howManyOf: isbn1).! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:21:59'!
test03CartShouldHaveManyBooksWhenAddingMany
	
	| aCart |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 5 of: isbn1.
	aCart add: 2 of: isbn2.
	
	self assert: 5 equals: (aCart howManyOf: isbn1).
	self assert: 2 equals: (aCart howManyOf: isbn2).! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:22:11'!
test04CanNotAddABookOutOfCatalog
	
	| aCart |

	catalog at: isbn2 put: 100.
	aCart := Cart with: catalog.

	self should: [ aCart add: 1 of: isbn1. ]
		raise: Error
		withMessageText: Cart bookIsOutOfCatalogErrorDescription.! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:22:24'!
test05CanNotAddLessThanOneBook
	
	| aCart |

	catalog at: isbn2 put: 100.
	aCart := Cart with: catalog.

	self should: [ aCart add: -1 of: isbn2. ]
		raise: Error
		withMessageText: Cart canNotAddLessThanOneBookErrorDescription.! !
!CartTest methodsFor: 'list' stamp: 'DS 11/18/2020 00:50:03'!
test06NewCartHaveEmptyList

	| aCart |

	aCart := Cart with: catalog.

	self assert: aCart list isEmpty.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:22:36'!
test07CartShouldHaveListWithOneOfABookWhenAddingIt

	| aCart |

	catalog at: isbn1 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.

	self assert: (Dictionary newFromPairs: {isbn1. 1} ) equals: aCart list.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:22:48'!
test08CartShouldHaveListWithManyBooksWhenAddingMany

	| aCart |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 2 of: isbn1.
	aCart add: 1 of: isbn2.

	self assert: (Dictionary newFromPairs: {isbn1. 2. isbn2. 1}) equals: aCart list.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:23:00'!
test09ModifyCartListShouldNotModifyTheCart

	| aCart list |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.
	aCart add: 1 of: isbn2.
	
	list := aCart list.
	list removeKey: isbn1.

	self assert: (Dictionary newFromPairs: {isbn1. 1. isbn2. 1}) equals: aCart list.! !

!classDefinition: #CashierTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:56'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CashierTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:56'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:01'!
test01CannotInitializeCashierWithEmptyCart

	| aCart aCatalog |

	aCatalog := Dictionary new.
	aCart := Cart with: aCatalog.

	self should: [Cashier for: aCart ]
		raise: Error
		withMessageText: Cashier creatingCashierWithEmptyCartErrorDescription.
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:07:30'!
test02CashierPriceShouldBeEqualToACartWithOneElement

	| aCashier aCart aCatalog book |

	book := 100001.

	aCatalog := Dictionary new.
	aCatalog at: book put: 200.
	
	aCart := Cart with: aCatalog.
	aCart add: 1 of: book.
	
	aCashier := Cashier for: aCart.
	
	self assert: 200 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:17'!
test03CashierPriceShouldBeEqualToACartWithManyElements

	| aCashier aCart aCatalog book book2 |
	
	book := 100001.
	book2 := 100002.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.
	aCatalog at: book2 put: 300.
	
	aCart := Cart with: aCatalog.
	aCart add: 1 of: book.
	aCart add: 1 of: book2.
	
	aCashier := Cashier for: aCart.

	self assert: 500 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:10:34'!
test04CashierPriceShouldBeEqualToACartWithManyOfSameElements

	| aCashier aCart aCatalog book |
	
	book := 100001.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.

	aCart := Cart with: aCatalog.
	aCart add: 4 of: book.
	
	aCashier := Cashier for: aCart.
	
	self assert: 800 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:27'!
test05

	| aCreditCard aCashier aCart aCatalog book |
	
	aCreditCard := 90012225123.
	book := 100001.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.

	aCart := Cart with: aCatalog.
	aCart add: 4 of: book.
	
	aCashier := Cashier for: aCart.
	
	self should: [aCashier checkoutWith: aCreditCard]
		raise: Error
		withMessageText: Cashier invalidCreditCardErrorDescription.
	
	
	
		! !

!classDefinition: #CreditCardTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:56'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCardTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:56'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:48:08'!
test01

	| number expirationDate owner |
	
	number := '123412341234123'.
	expirationDate  := February, 2021.
	owner := 'FedeSaba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidNumberErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:53:01'!
test02

	| number expirationDate owner |
	
	number := '123412341234123a'.
	expirationDate  := February, 2021.
	owner := 'FedeSaba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidNumberErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:52:24'!
test03

	| number expirationDate owner |
	
	number := '1234123412341234'.
	expirationDate  := February, 2021.
	owner := ''.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidOwnerErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 22:08:17'!
test04

	| number expirationDate owner |
	
	number := '1234123412341234'.
	expirationDate  := 'Verano del 92'.
	owner := 'Fede Saba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidExpirationDateErrorDescription.! !

!classDefinition: #Cart category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:56'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #Cart category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:57'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!Cart methodsFor: 'initialization' stamp: 'DS 11/18/2020 00:13:25'!
initializeWith: aCatalog 

	catalog := aCatalog.
	books := Bag new.! !
!Cart methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:19:22'!
add: aQuantity of: aBook

	(aQuantity > 0) ifFalse: [ self signalCanNotAddLessThanOneBook ].
	(catalog includesKey: aBook) ifFalse: [ self signalBookIsOutOfCatalog ].
	
	books add: aBook withOccurrences: aQuantity.! !
!Cart methodsFor: 'private accesing' stamp: 'DS 11/19/2020 21:03:02'!
catalog

	^catalog.! !
!Cart methodsFor: 'accessing' stamp: 'DS 11/19/2020 00:25:39'!
howManyOf: aBook

	^books occurrencesOf: aBook.! !
!Cart methodsFor: 'accessing' stamp: 'DS 11/19/2020 00:07:22'!
list

	^books contents copy.! !
!Cart methodsFor: 'testing' stamp: 'DS 11/19/2020 00:24:22'!
isEmpty

	^books isEmpty.! !
!Cart methodsFor: 'errors' stamp: 'DS 11/18/2020 00:38:43'!
signalBookIsOutOfCatalog

	^ self error: self class bookIsOutOfCatalogErrorDescription! !
!Cart methodsFor: 'errors' stamp: 'DS 11/18/2020 23:53:35'!
signalCanNotAddLessThanOneBook

	^ self error: self class canNotAddLessThanOneBookErrorDescription! !

!classDefinition: 'Cart class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:57'!
Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:57'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'DS 11/18/2020 00:12:34'!
with: aCatalog

	^self new initializeWith: aCatalog.! !
!Cart class methodsFor: 'error descriptions' stamp: 'DS 11/18/2020 00:26:48'!
bookIsOutOfCatalogErrorDescription

	^'The book you are trying to add is out of catalog'.! !
!Cart class methodsFor: 'error descriptions' stamp: 'DS 11/18/2020 23:51:26'!
canNotAddLessThanOneBookErrorDescription

	^'Can not add less than one book'.! !

!classDefinition: #Cashier category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:57'!
Object subclass: #Cashier
	instanceVariableNames: 'cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #Cashier category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:57'!
Object subclass: #Cashier
	instanceVariableNames: 'cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!Cashier methodsFor: 'initialization' stamp: 'DS 11/19/2020 21:05:44'!
initializeFor: aCart

	cart := aCart.! !
!Cashier methodsFor: 'checkout' stamp: 'FedericoSabatini 11/19/2020 20:02:46'!
checkoutWith: aCreditCard
	self error: self class invalidCreditCardErrorDescription.! !
!Cashier methodsFor: 'checkout' stamp: 'DS 11/19/2020 21:03:50'!
purchaseCost

	| purchaseSum |

	purchaseSum := 0.
	cart list keysAndValuesDo: [ :aKey :aValue | purchaseSum := purchaseSum + (cart catalog at: aKey) * aValue].
	^purchaseSum.
	
	! !

!classDefinition: 'Cashier class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'error descriptions' stamp: 'FedericoSabatini 11/19/2020 19:04:16'!
creatingCashierWithEmptyCartErrorDescription
	^'Cannot create a cashier from an empty Cart'! !
!Cashier class methodsFor: 'error descriptions' stamp: 'FedericoSabatini 11/19/2020 19:58:33'!
invalidCreditCardErrorDescription
	^'Invalid Credit Card error description'! !
!Cashier class methodsFor: 'assertions' stamp: 'DS 11/19/2020 21:05:24'!
assertEmptyCart: aCart

	^ aCart isEmpty ifTrue: [self error: self creatingCashierWithEmptyCartErrorDescription ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'DS 11/19/2020 21:05:24'!
for: aCart

	self assertEmptyCart: aCart.

	^self new initializeFor: aCart.! !

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber expirationDate owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber expirationDate owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCard methodsFor: 'initialization' stamp: 'DS 11/19/2020 21:48:01'!
initializeWithNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner

	creditCardNumber := aCreditCardNumber.
	expirationDate := anExpirationDate.
	owner := anOwner.! !

!classDefinition: 'CreditCard class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:29:58'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:26'!
assertValidCreditCardNumber: aCreditCardNumber

	^(aCreditCardNumber size < 16
		or: [ aCreditCardNumber asArray anySatisfy: [:aNumber | aNumber isDigit not] ]
	) ifTrue: [	self error: self invalidNumberErrorDescription].! !
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:34'!
assertValidFormatExpirationDate: anExpirationDate

	^ (anExpirationDate isKindOf: GregorianMonthOfYear) ifFalse: [self error: self invalidExpirationDateErrorDescription ].! !
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:37'!
assertValidOwner: anOwner

	^ anOwner ifEmpty: [self error: self invalidOwnerErrorDescription].! !
!CreditCard class methodsFor: 'instance creation' stamp: 'DS 11/19/2020 22:10:46'!
withNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner

	self assertValidCreditCardNumber: aCreditCardNumber.
	self assertValidOwner: anOwner.
	self assertValidFormatExpirationDate: anExpirationDate.

	^self new initializeWithNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 22:08:48'!
invalidExpirationDateErrorDescription

	^'Invalid format of Expiration Date'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 21:45:36'!
invalidNumberErrorDescription

	^'Invalid number of credit card'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 21:50:24'!
invalidOwnerErrorDescription

	^'Owner can not be empty'.! !

!classRemoval: #Cashier stamp: 'FedericoSabatini 11/29/2020 15:29:59'!
Object subclass: #Cashier
	instanceVariableNames: 'cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Cart stamp: 'FedericoSabatini 11/29/2020 15:29:59'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CashierTest stamp: 'FedericoSabatini 11/29/2020 15:30:00'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CartTest stamp: 'FedericoSabatini 11/29/2020 15:30:00'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CartTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:00'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CartTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:01'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CartTest methodsFor: 'setup' stamp: 'FedericoSabatini 11/19/2020 19:20:29' overrides: 16927572!
setUp

	catalog := Dictionary new.
	isbn1 := 100000.
	isbn2 := 100001.! !
!CartTest methodsFor: 'adding' stamp: 'DS 11/19/2020 00:26:21'!
test01NewCartIsEmpty
	
	| aCart |

	aCart := Cart with: catalog.
	
	self assert: aCart isEmpty.! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:21:40'!
test02CartShouldHaveOneOfABookWhenAddingIt
	
	|  aCart |

	catalog at: isbn1 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.
	
	self deny: aCart isEmpty.
	self assert: 1 equals: (aCart howManyOf: isbn1).! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:21:59'!
test03CartShouldHaveManyBooksWhenAddingMany
	
	| aCart |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 5 of: isbn1.
	aCart add: 2 of: isbn2.
	
	self assert: 5 equals: (aCart howManyOf: isbn1).
	self assert: 2 equals: (aCart howManyOf: isbn2).! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:22:11'!
test04CanNotAddABookOutOfCatalog
	
	| aCart |

	catalog at: isbn2 put: 100.
	aCart := Cart with: catalog.

	self should: [ aCart add: 1 of: isbn1. ]
		raise: Error
		withMessageText: Cart bookIsOutOfCatalogErrorDescription.! !
!CartTest methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:22:24'!
test05CanNotAddLessThanOneBook
	
	| aCart |

	catalog at: isbn2 put: 100.
	aCart := Cart with: catalog.

	self should: [ aCart add: -1 of: isbn2. ]
		raise: Error
		withMessageText: Cart canNotAddLessThanOneBookErrorDescription.! !
!CartTest methodsFor: 'list' stamp: 'DS 11/18/2020 00:50:03'!
test06NewCartHaveEmptyList

	| aCart |

	aCart := Cart with: catalog.

	self assert: aCart list isEmpty.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:22:36'!
test07CartShouldHaveListWithOneOfABookWhenAddingIt

	| aCart |

	catalog at: isbn1 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.

	self assert: (Dictionary newFromPairs: {isbn1. 1} ) equals: aCart list.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:22:48'!
test08CartShouldHaveListWithManyBooksWhenAddingMany

	| aCart |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 2 of: isbn1.
	aCart add: 1 of: isbn2.

	self assert: (Dictionary newFromPairs: {isbn1. 2. isbn2. 1}) equals: aCart list.! !
!CartTest methodsFor: 'list' stamp: 'FedericoSabatini 11/19/2020 19:23:00'!
test09ModifyCartListShouldNotModifyTheCart

	| aCart list |

	catalog at: isbn1 put: 100.
	catalog at: isbn2 put: 100.

	aCart := Cart with: catalog.
	aCart add: 1 of: isbn1.
	aCart add: 1 of: isbn2.
	
	list := aCart list.
	list removeKey: isbn1.

	self assert: (Dictionary newFromPairs: {isbn1. 1. isbn2. 1}) equals: aCart list.! !

!classDefinition: #CashierTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:01'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CashierTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:01'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:01'!
test01CannotInitializeCashierWithEmptyCart

	| aCart aCatalog |

	aCatalog := Dictionary new.
	aCart := Cart with: aCatalog.

	self should: [Cashier for: aCart ]
		raise: Error
		withMessageText: Cashier creatingCashierWithEmptyCartErrorDescription.
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:07:30'!
test02CashierPriceShouldBeEqualToACartWithOneElement

	| aCashier aCart aCatalog book |

	book := 100001.

	aCatalog := Dictionary new.
	aCatalog at: book put: 200.
	
	aCart := Cart with: aCatalog.
	aCart add: 1 of: book.
	
	aCashier := Cashier for: aCart.
	
	self assert: 200 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:17'!
test03CashierPriceShouldBeEqualToACartWithManyElements

	| aCashier aCart aCatalog book book2 |
	
	book := 100001.
	book2 := 100002.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.
	aCatalog at: book2 put: 300.
	
	aCart := Cart with: aCatalog.
	aCart add: 1 of: book.
	aCart add: 1 of: book2.
	
	aCashier := Cashier for: aCart.

	self assert: 500 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:10:34'!
test04CashierPriceShouldBeEqualToACartWithManyOfSameElements

	| aCashier aCart aCatalog book |
	
	book := 100001.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.

	aCart := Cart with: aCatalog.
	aCart add: 4 of: book.
	
	aCashier := Cashier for: aCart.
	
	self assert: 800 equals: aCashier purchaseCost.
	
	
	
		! !
!CashierTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:06:27'!
test05

	| aCreditCard aCashier aCart aCatalog book |
	
	aCreditCard := 90012225123.
	book := 100001.
	
	aCatalog := Dictionary new.
	aCatalog at: book put: 200.

	aCart := Cart with: aCatalog.
	aCart add: 4 of: book.
	
	aCashier := Cashier for: aCart.
	
	self should: [aCashier checkoutWith: aCreditCard]
		raise: Error
		withMessageText: Cashier invalidCreditCardErrorDescription.
	
	
	
		! !

!classDefinition: #CreditCardTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:02'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCardTest category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:02'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:48:08' prior: 50877559!
test01

	| number expirationDate owner |
	
	number := '123412341234123'.
	expirationDate  := February, 2021.
	owner := 'FedeSaba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidNumberErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:53:01' prior: 50877572!
test02

	| number expirationDate owner |
	
	number := '123412341234123a'.
	expirationDate  := February, 2021.
	owner := 'FedeSaba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidNumberErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 21:52:24' prior: 50877585!
test03

	| number expirationDate owner |
	
	number := '1234123412341234'.
	expirationDate  := February, 2021.
	owner := ''.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidOwnerErrorDescription.! !
!CreditCardTest methodsFor: 'tests' stamp: 'DS 11/19/2020 22:08:17' prior: 50877597!
test04

	| number expirationDate owner |
	
	number := '1234123412341234'.
	expirationDate  := 'Verano del 92'.
	owner := 'Fede Saba S.A.'.

	self should: [ CreditCard withNumber: number withExpirationDate: expirationDate andOwner: owner. ]
		raise: Error
		withMessageText: CreditCard invalidExpirationDateErrorDescription.! !

!classDefinition: #Cart category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:02'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #Cart category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:02'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!Cart methodsFor: 'initialization' stamp: 'DS 11/18/2020 00:13:25'!
initializeWith: aCatalog 

	catalog := aCatalog.
	books := Bag new.! !
!Cart methodsFor: 'adding' stamp: 'FedericoSabatini 11/19/2020 19:19:22'!
add: aQuantity of: aBook

	(aQuantity > 0) ifFalse: [ self signalCanNotAddLessThanOneBook ].
	(catalog includesKey: aBook) ifFalse: [ self signalBookIsOutOfCatalog ].
	
	books add: aBook withOccurrences: aQuantity.! !
!Cart methodsFor: 'private accesing' stamp: 'DS 11/19/2020 21:03:02'!
catalog

	^catalog.! !
!Cart methodsFor: 'accessing' stamp: 'DS 11/19/2020 00:25:39'!
howManyOf: aBook

	^books occurrencesOf: aBook.! !
!Cart methodsFor: 'accessing' stamp: 'DS 11/19/2020 00:07:22'!
list

	^books contents copy.! !
!Cart methodsFor: 'testing' stamp: 'DS 11/19/2020 00:24:22'!
isEmpty

	^books isEmpty.! !
!Cart methodsFor: 'errors' stamp: 'DS 11/18/2020 00:38:43'!
signalBookIsOutOfCatalog

	^ self error: self class bookIsOutOfCatalogErrorDescription! !
!Cart methodsFor: 'errors' stamp: 'DS 11/18/2020 23:53:35'!
signalCanNotAddLessThanOneBook

	^ self error: self class canNotAddLessThanOneBookErrorDescription! !

!classDefinition: 'Cart class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Cart class
	instanceVariableNames: ''!

!classDefinition: 'Cart class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Cart class
	instanceVariableNames: ''!
!Cart class methodsFor: 'instance creation' stamp: 'DS 11/18/2020 00:12:34'!
with: aCatalog

	^self new initializeWith: aCatalog.! !
!Cart class methodsFor: 'error descriptions' stamp: 'DS 11/18/2020 00:26:48'!
bookIsOutOfCatalogErrorDescription

	^'The book you are trying to add is out of catalog'.! !
!Cart class methodsFor: 'error descriptions' stamp: 'DS 11/18/2020 23:51:26'!
canNotAddLessThanOneBookErrorDescription

	^'Can not add less than one book'.! !

!classDefinition: #Cashier category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Object subclass: #Cashier
	instanceVariableNames: 'cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #Cashier category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Object subclass: #Cashier
	instanceVariableNames: 'cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!Cashier methodsFor: 'initialization' stamp: 'DS 11/19/2020 21:05:44'!
initializeFor: aCart

	cart := aCart.! !
!Cashier methodsFor: 'checkout' stamp: 'FedericoSabatini 11/19/2020 20:02:46'!
checkoutWith: aCreditCard
	self error: self class invalidCreditCardErrorDescription.! !
!Cashier methodsFor: 'checkout' stamp: 'DS 11/19/2020 21:03:50'!
purchaseCost

	| purchaseSum |

	purchaseSum := 0.
	cart list keysAndValuesDo: [ :aKey :aValue | purchaseSum := purchaseSum + (cart catalog at: aKey) * aValue].
	^purchaseSum.
	
	! !

!classDefinition: 'Cashier class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Cashier class
	instanceVariableNames: ''!

!classDefinition: 'Cashier class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:03'!
Cashier class
	instanceVariableNames: ''!
!Cashier class methodsFor: 'error descriptions' stamp: 'FedericoSabatini 11/19/2020 19:04:16'!
creatingCashierWithEmptyCartErrorDescription
	^'Cannot create a cashier from an empty Cart'! !
!Cashier class methodsFor: 'error descriptions' stamp: 'FedericoSabatini 11/19/2020 19:58:33'!
invalidCreditCardErrorDescription
	^'Invalid Credit Card error description'! !
!Cashier class methodsFor: 'assertions' stamp: 'DS 11/19/2020 21:05:24'!
assertEmptyCart: aCart

	^ aCart isEmpty ifTrue: [self error: self creatingCashierWithEmptyCartErrorDescription ]! !
!Cashier class methodsFor: 'instance creation' stamp: 'DS 11/19/2020 21:05:24'!
for: aCart

	self assertEmptyCart: aCart.

	^self new initializeFor: aCart.! !

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:04'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber expirationDate owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:04'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber expirationDate owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCard methodsFor: 'initialization' stamp: 'DS 11/19/2020 21:48:01' prior: 50877772!
initializeWithNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner

	creditCardNumber := aCreditCardNumber.
	expirationDate := anExpirationDate.
	owner := anOwner.! !

!classDefinition: 'CreditCard class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:04'!
CreditCard class
	instanceVariableNames: ''!

!classDefinition: 'CreditCard class' category: 'TusLibros-Solucion' stamp: 'FedericoSabatini 11/29/2020 15:30:04'!
CreditCard class
	instanceVariableNames: ''!
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:26' prior: 50877791!
assertValidCreditCardNumber: aCreditCardNumber

	^(aCreditCardNumber size < 16
		or: [ aCreditCardNumber asArray anySatisfy: [:aNumber | aNumber isDigit not] ]
	) ifTrue: [	self error: self invalidNumberErrorDescription].! !
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:34' prior: 50877801!
assertValidFormatExpirationDate: anExpirationDate

	^ (anExpirationDate isKindOf: GregorianMonthOfYear) ifFalse: [self error: self invalidExpirationDateErrorDescription ].! !
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/19/2020 22:12:37' prior: 50877809!
assertValidOwner: anOwner

	^ anOwner ifEmpty: [self error: self invalidOwnerErrorDescription].! !
!CreditCard class methodsFor: 'instance creation' stamp: 'DS 11/19/2020 22:10:46' prior: 50877815!
withNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner

	self assertValidCreditCardNumber: aCreditCardNumber.
	self assertValidOwner: anOwner.
	self assertValidFormatExpirationDate: anExpirationDate.

	^self new initializeWithNumber: aCreditCardNumber withExpirationDate: anExpirationDate andOwner: anOwner.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 22:08:48' prior: 50877829!
invalidExpirationDateErrorDescription

	^'Invalid format of Expiration Date'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 21:45:36' prior: 50877835!
invalidNumberErrorDescription

	^'Invalid number of credit card'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/19/2020 21:50:24' prior: 50877840!
invalidOwnerErrorDescription

	^'Owner can not be empty'.! !

!classRemoval: #CreditCard stamp: 'FedericoSabatini 11/29/2020 15:30:04'!
Object subclass: #CreditCard
	instanceVariableNames: 'creditCardNumber expirationDate owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

----STARTUP---- (29 November 2020 15:30:07) as D:\facultad\Smalltalk\windows64\CuisUniversity-4384.image!


!classRemoval: #Cashier stamp: 'FedericoSabatini 11/29/2020 15:30:15'!
Object subclass: #Cashier
	instanceVariableNames: 'cart catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Cart stamp: 'FedericoSabatini 11/29/2020 15:30:16'!
Object subclass: #Cart
	instanceVariableNames: 'books catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CashierTest stamp: 'FedericoSabatini 11/29/2020 15:30:16'!
TestCase subclass: #CashierTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CartTest stamp: 'FedericoSabatini 11/29/2020 15:30:16'!
TestCase subclass: #CartTest
	instanceVariableNames: 'catalog isbn1 isbn2'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

----End fileIn of D:\facultad\Smalltalk\windows64\TusLibros-Solucion.st----!

!classRemoval: #StoreTestObjectsFactory stamp: 'FedericoSabatini 11/29/2020 15:33:27'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Sale stamp: 'FedericoSabatini 11/29/2020 15:33:27'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #FacadeTusLibros stamp: 'FedericoSabatini 11/29/2020 15:33:28'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CreditCard stamp: 'FedericoSabatini 11/29/2020 15:33:28'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Cashier stamp: 'FedericoSabatini 11/29/2020 15:33:29'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #Cart stamp: 'FedericoSabatini 11/29/2020 15:33:29'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #FacadeTusLibrosTest stamp: 'FedericoSabatini 11/29/2020 15:33:29'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CashierTest stamp: 'FedericoSabatini 11/29/2020 15:33:30'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classRemoval: #CartTest stamp: 'FedericoSabatini 11/29/2020 15:33:30'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

----End fileIn of D:\facultad\Smalltalk\windows64\TusLibros-33.st----!

Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 15:36:02'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibrosTest category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 15:36:07'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibrosTest methodsFor: 'nil' stamp: 'FedericoSabatini 11/29/2020 15:36:28'!
test01CreateCartHaveEmptyList

    | tusLibros cartID authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.
    cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

    self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:36:30'!
ERROR!
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:36:49'!
with: aDictionary 
	self shouldBeImplemented.! !
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:37:01' prior: 50879863!
with: anAuthenticator

    ^self new initializeWith: anAuthenticator.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:37:04'!
ERROR!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 15:37:24'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 15:37:24'!
initializeWith: anAuthenticator 
	self shouldBeImplemented.
	authenticator := anAuthenticator.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 15:37:28' prior: 50879886!
initializeWith: anAuthenticator 
	authenticator := anAuthenticator.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:37:29'!
ERROR!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:37:37'!
createCartForUser: aSmallInteger withPassword: aString 
	self shouldBeImplemented.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:37:53' prior: 50879902!
createCartForUser: anID withPassword: aPassword 

    authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
    ((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:37:59'!
ERROR!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:38:07'!
listCartFor: aFacadeTusLibros 
	self shouldBeImplemented.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:38:18' prior: 50879924!
listCartFor: aCartID

    ^Dictionary new.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:38:22'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:38:22'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:38:49'!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

    self should: [        tusLibros createCartForUser: 1 withPassword: 'bad password'.        ]
        raise: Error
        withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 15:38:51'!
ERROR!
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:38:57'!
badAuthenticationErrorDescription
	self shouldBeImplemented.! !
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:39:11' prior: 50879962!
badAuthenticationErrorDescription

    ^'Dont exist an user with this password'.! !

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 15:39:12'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:39:12'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 15:39:12'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:39:34' prior: 50879942!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

    self should: [tusLibros createCartForUser: 1 withPassword: 'bad password'.]
        raise: Error
        withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:39:43'!
test03CannotCreateCartWithUnknownUser

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

    self should: [ tusLibros createCartForUser: 2 withPassword: 'password'. ]
        raise: Error
        withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 15:39:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 15:39:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 15:39:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 15:39:45'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:39:49' prior: 50879987!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

    self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
        raise: Error
        withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

----SNAPSHOT----(29 November 2020 15:40:59) CuisUniversity-4384.image priorSource: 17381765!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:45:06' prior: 50879909!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   ! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:04'!
test04

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:19' prior: 50879845!
test01CreateCartHaveEmptyList

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:40' prior: 50880002!
test03CannotCreateCartWithUnknownUser

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 2 withPassword: 'password'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:46' prior: 50880033!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
        raise: Error
        withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:51' prior: 50880105!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
    tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:53' prior: 50880121!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

    authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:55' prior: 50880136!
test02CannotCreateCartWithInvalidPassword

    | tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:48:58' prior: 50880151!
test02CannotCreateCartWithInvalidPassword

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:49:07' prior: 50879930!
listCartFor: aCartID

	^Dictionary new.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:49:14' prior: 50880051!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   ! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 15:49:18' prior: 50879893!
initializeWith: anAuthenticator 
	authenticator := anAuthenticator.! !

!classDefinition: #FacadeTusLibrosTest category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 15:50:56'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'expiration testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibrosTest methodsFor: 'nil' stamp: 'FedericoSabatini 11/29/2020 15:50:54' overrides: 16927572!
setUp
	testObjectsFactory := StoreTestObjectsFactory new.! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 15:52:05' prior: 50880186!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   	^1! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:54:17' prior: 50880063!
test04

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	 
	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:55:39' prior: 50880231!
test04

	| tusLibros cartID authenticator expectedCartList |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	 
	expectedCartList := Dictionary with: 1 -> testObjectsFactory itemSellByTheStore.
	
	
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:55:53' prior: 50880247!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: 1 -> testObjectsFactory itemSellByTheStore.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 15:55:54'!
ERROR!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:56:03'!
addToCart: aSmallInteger aQuantity: aSmallInteger2 of: aString 
	self shouldBeImplemented.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 15:56:26' prior: 50880287!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	! !

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:00:28'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:00:24' prior: 50880294!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	cart add: aQuantity of: anItem.
	! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:00:30'!
ERROR!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:00:46' prior: 50880198!
initializeWith: anAuthenticator 
	authenticator := anAuthenticator.
	cart := Cart new.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:00:50'!
ERROR!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:01:59' prior: 50880266!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: 1 -> testObjectsFactory itemSellByTheStore.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:02:04' prior: 50880328!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: 1 -> testObjectsFactory itemSellByTheStore.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: (testObjectsFactory defaultCatalog).
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:02:11' prior: 50880348!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: 1 -> testObjectsFactory itemSellByTheStore.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:02:16'!
ERROR!
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:02:31'!
with: aDictionary and: aDictionary2 
	self shouldBeImplemented.! !
!FacadeTusLibros class methodsFor: 'instance creation' stamp: 'FedericoSabatini 11/29/2020 16:03:10' prior: 50880391!
with: anAuthenticator and: aCatalog 
	^self new initializeWith: anAuthenticator and: aCatalog.! !

!methodRemoval: FacadeTusLibros class #with: stamp: 'FedericoSabatini 11/29/2020 16:03:20'!
with: anAuthenticator

    ^self new initializeWith: anAuthenticator.!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:03:26'!
ERROR!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:03:32'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:03:32'!
initializeWith: anAuthenticator and: aCatalog 
	self shouldBeImplemented.
	authenticator := anAuthenticator.
	catalog := aCatalog.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:03:36' prior: 50880420!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	catalog := aCatalog.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:03:37'!
ERROR!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:03:47' prior: 50880428!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	catalog := aCatalog.
		cart := Cart new.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:03:49' prior: 50880438!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	catalog := aCatalog.
	cart := Cart new.! !

!methodRemoval: FacadeTusLibros #initializeWith: stamp: 'FedericoSabatini 11/29/2020 16:03:52'!
initializeWith: anAuthenticator 
	authenticator := anAuthenticator.
	cart := Cart new.!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:03:56'!
ERROR!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:04:09' prior: 50880090!
test03CannotCreateCartWithUnknownUser

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	self should: [ tusLibros createCartForUser: 2 withPassword: 'password'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:04:14' prior: 50880166!
test02CannotCreateCartWithInvalidPassword

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:04:17' prior: 50880076!
test01CreateCartHaveEmptyList

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:04:20' prior: 50880495!
test01CreateCartHaveEmptyList

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 16:04:23'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 16:04:23'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 16:04:23'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:04:23'!
ERROR!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:04:23'!
ERROR!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:04:31'!
ERROR!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:05:00' prior: 50880446!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	catalog := aCatalog.
	cart := Cart with: aCatalog.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:05:27' prior: 50880546!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	catalog := aCatalog.
	cart := Cart acceptingItemsOf: aCatalog.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:05:33' prior: 50880554!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	cart := Cart acceptingItemsOf: aCatalog.! !

Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:05:46'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:05:49'!
FAILURE!
!FacadeTusLibros methodsFor: 'list' stamp: 'FedericoSabatini 11/29/2020 16:06:19' prior: 50880181!
listCartFor: aCartID

	^cart list.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:06:22'!
ERROR!
!Cart methodsFor: 'accesing' stamp: 'FedericoSabatini 11/29/2020 16:08:56'!
items
	
	^items copy.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:09:02'!
ERROR!
!FacadeTusLibros methodsFor: 'list' stamp: 'FedericoSabatini 11/29/2020 16:09:17' prior: 50880587!
listCartFor: aCartID

	^cart items.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:09:21'!
FAILURE!
!Cart methodsFor: 'accesing' stamp: 'FedericoSabatini 11/29/2020 16:15:43' prior: 50880594!
items
	
	| ocurrences |
	
	ocurrences := Dictionary new.
	! !

----End fileIn of D:\facultad\Smalltalk\windows64\Packages\TerseGuide.pck.st----!
!Cart methodsFor: 'accesing' stamp: 'FedericoSabatini 11/29/2020 16:21:50' prior: 50880609!
items
	
	| ocurrences |
	
	ocurrences := Dictionary new.
	
	items do: [ :item | (ocurrences includesKey: item) 
		ifTrue: [ocurrences at: item put: (ocurrences at: item + 1)] 
		ifFalse: [ocurrences at: item put: 1]].! !
!Cart methodsFor: 'accesing' stamp: 'FedericoSabatini 11/29/2020 16:22:06' prior: 50883550!
items
	
	| ocurrences |
	
	ocurrences := Dictionary new.
	
	items do: [ :item | (ocurrences includesKey: item) 
		ifTrue: [ocurrences at: item put: (ocurrences at: item + 1)] 
		ifFalse: [ocurrences at: item put: 1]].
	
	^ocurrences.! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:22:18'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:22:43' prior: 50880368!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:22:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 16:22:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 16:22:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 16:22:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:22:44'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:23:28' prior: 50883575!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:24:47'!
test05

	| tusLibros cartID cartID2 authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:24:56'!
test06

	| tusLibros cartID cartID2 authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:25:02' prior: 50883633!
test05

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:25:44'!
test04CannotCreate2CartWithSameID

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!methodRemoval: FacadeTusLibrosTest #test04 stamp: 'FedericoSabatini 11/29/2020 16:25:48'!
test04

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:26:13'!
test04CannotAssignSameIDForDiferentCarts

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:26:20'!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!methodRemoval: FacadeTusLibrosTest #test04CannotAssignSameIDForDiferentCarts stamp: 'FedericoSabatini 11/29/2020 16:26:23'!
test04CannotAssignSameIDForDiferentCarts

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!

!methodRemoval: FacadeTusLibrosTest #test04CannotCreate2CartWithSameID stamp: 'FedericoSabatini 11/29/2020 16:26:27'!
test04CannotCreate2CartWithSameID

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:27:48' prior: 50883759!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID cartID2 authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:27:57' prior: 50883822!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID cartID2 authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:30:20' prior: 50883845!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID cartID2 authenticator expectedCartList |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	self assert: cartID ~= cartID2.! !

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:30:35'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:30:43' prior: 50883869!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID cartID2 authenticator expectedCartList |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	self assert: (cartID ~= cartID2).! !

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:30:49'!
FAILURE!

Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart id'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:31:10'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart id'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart currentID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:31:24'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator cart currentID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:31:39' prior: 50880219!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   	^currentID + 1.! !
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:31:51' prior: 50880563!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	cart := Cart acceptingItemsOf: aCatalog.
	currentID := 0.! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:32:37' prior: 50883940!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   	currentID := currentID + 1.
	^currentID! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:32:41' prior: 50883961!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
   	currentID := currentID + 1.
	^currentID.! !

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05 stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:32:45'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:35:21' prior: 50883655!
test06

	| tusLibros cartID cartID2 authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: cartID2 aQuantity: 2 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: cartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:36:16' prior: 50884013!
test06

	| tusLibros cartID cartID2 authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 2.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: cartID2 aQuantity: 2 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: cartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:36:19'!
ERROR!
!Cart methodsFor: 'accesing' stamp: 'FedericoSabatini 11/29/2020 16:36:53' prior: 50883560!
items
	
	| ocurrences |
	
	ocurrences := Dictionary new.
	
	items do: [ :item | (ocurrences includesKey: item) 
		ifTrue: [ocurrences at: item put: (ocurrences at: item) + 1] 
		ifFalse: [ocurrences at: item put: 1]].
	
	^ocurrences.! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:36:54'!
FAILURE!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:37:38'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator carts currentID'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:37:38' prior: 50880601!
listCartFor: aCartID

	^carts items.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:37:38' prior: 50880308!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	carts add: aQuantity of: anItem.
	! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:37:38' prior: 50883953!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	carts := Cart acceptingItemsOf: aCatalog.
	currentID := 0.! !

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:38:59'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'expiration authenticator carts currentID catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'FedericoSabatini 11/29/2020 16:38:58' prior: 50884111!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	carts := Dictionary new. 
	catalog := aCatalog.
	currentID := 0.! !

Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator carts currentID catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibros category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:39:27'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator carts currentID catalog'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classDefinition: #FacadeTusLibrosTest category: 'TusLibros' stamp: 'FedericoSabatini 11/29/2020 16:39:32'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:41:41' prior: 50883974!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
	
	carts at: currentID put: (Cart acceptingItemsOf: catalog).
   	currentID := currentID + 1.
	^currentID.! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:42:50' prior: 50884164!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
	
	carts at: currentID put: (Cart acceptingItemsOf: catalog).
   	currentID := currentID + 1.
	^currentID - 1.! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:42:54'!
ERROR!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:44:33' prior: 50884104!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	| aCart |
	
	aCart := carts at: aCartID.
	aCart add: aQuantity of: anItem.
	
	! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:44:35'!
ERROR!
!FacadeTusLibros methodsFor: 'list' stamp: 'FedericoSabatini 11/29/2020 16:44:54' prior: 50884099!
listCartFor: aCartID

	^(carts at: aCartID) items.! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:44:54'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:47:01'!
FAILURE!
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'FedericoSabatini 11/29/2020 16:48:33' prior: 50884179!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self error: self class badAuthenticationErrorDescription ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
	
	currentID := currentID + 1.
	carts at: currentID put: (Cart acceptingItemsOf: catalog).

	^currentID.! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:49:01'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:49:20' prior: 50884043!
test06

	| tusLibros cartID cartID2 authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 2.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: cartID2 aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: cartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:49:29' prior: 50884238!
test06

	| tusLibros cartID cartID2 authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: cartID2 aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: cartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:49:31'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:51:59'!
ERROR!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:52:04'!
FAILURE!

(carts at: 1) occurrencesOf: 1.!

(carts at: 1) occurrencesOf: anItem.!

(carts at: 2) occurrencesOf: anItem.!

carts!

aCart!

(carts at: 2) occurrencesOf: 1. !

(carts at: 2) occurrencesOf: 'validBook'. !

(carts at: 1) occurrencesOf: 'validBook'.!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:56:00' prior: 50884269!
test06

	| tusLibros cartID cartID2 authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: cartID2 aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: cartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: cartID2).! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05 stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:56:10'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:56:48' prior: 50884316!
test06

	| tusLibros firstCart secondCart authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCart := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCart := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCart aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCart aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: firstCart).
	self assert: expectedCart2 equals: (tusLibros listCartFor: secondCart).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:56:54' prior: 50884371!
test06

	| tusLibros firstCartID secondCart authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCart := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCart aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: secondCart).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:57:11' prior: 50884402!
test06

	| tusLibros firstCartID secondCartID authenticator expectedCart1 expectedCart2 |

	expectedCart1 := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedCart1 equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: secondCartID).! !

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05 stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 16:57:15'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:57:55' prior: 50884434!
test06

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedCart2 |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedCart2 := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedCart2 equals: (tusLibros listCartFor: secondCartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 16:58:06' prior: 50884490!
test06

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:00:09'!
test07CannotAddToUnknownCart

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:00:13'!
test07CannotAddToUnknownCartID

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).! !

!methodRemoval: FacadeTusLibrosTest #test07CannotAddToUnknownCart stamp: 'FedericoSabatini 11/29/2020 17:00:17'!
test07CannotAddToUnknownCart

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:00:49' prior: 50884587!
test07CannotAddToUnknownCartID

	| tusLibros firstCartID authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:00:59' prior: 50884653!
test07CannotAddToUnknownCartID

	| tusLibros CartID authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	CartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: CartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:01:09' prior: 50884670!
test07CannotAddToUnknownCartID

	| tusLibros CartID authenticator |

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	CartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: CartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:01:30' prior: 50884686!
test07CannotAddToUnknownCartID

	| tusLibros CartID authenticator |

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	CartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	
	tusLibros addToCart: 200 aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:01:41' prior: 50884701!
test07CannotAddToUnknownCartID

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	tusLibros createCartForUser: 1 withPassword: 'pass'.

	
	tusLibros addToCart: 200 aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:01:57' prior: 50884716!
test07CannotAddToUnknownCartID

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	tusLibros addToCart: 1 aQuantity: 5 of: testObjectsFactory itemSellByTheStore.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:03:32' prior: 50884731!
test07CannotAddToUnknownCartID

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	self should: [tusLibros addToCart: 1 aQuantity: 5 of: testObjectsFactory itemSellByTheStore]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'FedericoSabatini 11/29/2020 17:03:36'!
ERROR!
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:03:48'!
unknownCartIDErrorDescription
	self shouldBeImplemented.! !
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:04:32' prior: 50884763!
unknownCartIDErrorDescription
	^ 'Can not add item to unknown cart ID'! !

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'FedericoSabatini 11/29/2020 17:04:34'!
FAILURE!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:06:07' prior: 50884197!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	| aCart |
	
	(carts includesKey: aCartID) ifFalse: [self error: self class unknownCartIDErrorDescription ].
	aCart := carts at: aCartID.
	aCart add: aQuantity of: anItem.
	
	! !

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'FedericoSabatini 11/29/2020 17:06:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'FedericoSabatini 11/29/2020 17:06:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'FedericoSabatini 11/29/2020 17:06:10'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'FedericoSabatini 11/29/2020 17:06:11'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'FedericoSabatini 11/29/2020 17:06:11'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05 stamp: 'FedericoSabatini 11/29/2020 17:06:11'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 17:06:11'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'FedericoSabatini 11/29/2020 17:06:11'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:07:21'!
test05AddedItemIsIncludedInCartList

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!methodRemoval: FacadeTusLibrosTest #test05 stamp: 'FedericoSabatini 11/29/2020 17:07:21'!
test05

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:07:52'!
test05AddItemIsIncludedInCartList

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!methodRemoval: FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'FedericoSabatini 11/29/2020 17:07:52'!
test05AddedItemIsIncludedInCartList

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:08:53'!
test05AddedItemIsIncludedInCartList

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!methodRemoval: FacadeTusLibrosTest #test05AddItemIsIncludedInCartList stamp: 'FedericoSabatini 11/29/2020 17:08:53'!
test05AddItemIsIncludedInCartList

	| tusLibros cartID authenticator expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).!
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'FedericoSabatini 11/29/2020 17:09:28'!
test06AddedItemsInDifferentsCartsAreInRespectiveLists

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).! !

!methodRemoval: FacadeTusLibrosTest #test06 stamp: 'FedericoSabatini 11/29/2020 17:09:28'!
test06

	| tusLibros firstCartID secondCartID authenticator expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).!

----SNAPSHOT----(29 November 2020 17:09:35) CuisUniversity-4384.image priorSource: 17548686!

----SNAPSHOT----(29 November 2020 17:10:19) CuisUniversity-4384.image priorSource: 17707368!

----STARTUP---- (29 November 2020 17:12:33) as /mnt/sdb5/Ingenieria1/CuisUniversity (copy)/CuisUniversity-4384.image!


!classRemoval: #StoreTestObjectsFactory stamp: 'DS 11/29/2020 17:12:39'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Sale stamp: 'DS 11/29/2020 17:12:40'!
Object subclass: #Sale
	instanceVariableNames: 'total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #FacadeTusLibros stamp: 'DS 11/29/2020 17:12:40'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CreditCard stamp: 'DS 11/29/2020 17:12:40'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cashier stamp: 'DS 11/29/2020 17:12:41'!
Object subclass: #Cashier
	instanceVariableNames: 'cart salesBook merchantProcessor creditCard total'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #Cart stamp: 'DS 11/29/2020 17:12:41'!
Object subclass: #Cart
	instanceVariableNames: 'catalog items'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #FacadeTusLibrosTest stamp: 'DS 11/29/2020 17:12:42'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CashierTest stamp: 'DS 11/29/2020 17:12:42'!
TestCase subclass: #CashierTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

!classRemoval: #CartTest stamp: 'DS 11/29/2020 17:12:42'!
TestCase subclass: #CartTest
	instanceVariableNames: 'testObjectsFactory'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros'!

----End fileIn of /mnt/sdb5/Ingenieria1/CuisUniversity (copy)/TusLibros-Solucion.st----!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 17:12:50'!
PASSED!

	StoreTestObjectsFactory new; itemSellByTheStorePrice !

StoreTestObjectsFactory new itemSellByTheStorePrice !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:23:42'!
test08

	| tusLibros cartID authenticator salesBook creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	salesBook := OrderedCollection new.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := July,2021.
	creditCardNumber := '1234123412341234'.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	self assert: 10 equals: (tusLibros checkOutCart: cartID withCCN: creditCardNumber withCCED: creditCardExpirationDate andCCO: creditCardOwner).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:24:08' prior: 50882266!
test08

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := July,2021.
	creditCardNumber := '1234123412341234'.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	self assert: 10 equals: (tusLibros checkOutCart: cartID withCCN: creditCardNumber withCCED: creditCardExpirationDate andCCO: creditCardOwner).! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 17:24:11'!
ERROR!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:24:18'!
checkOutCart: aSmallInteger withCCN: aString withCCED: aGregorianMonthOfYear andCCO: aString4 
	self shouldBeImplemented.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:25:14' prior: 50882318!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO

	^100.
! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 17:25:16'!
FAILURE!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:25:25' prior: 50882326!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO

	^10.
! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 17:25:27'!
PASSED!

!classDefinition: #StoreTestObjectsFactory category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 17:34:22'!
Object subclass: #StoreTestObjectsFactory
	instanceVariableNames: 'today debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!StoreTestObjectsFactory methodsFor: 'merchant proccesor protocol' stamp: 'DS 11/29/2020 17:34:20'!
debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard.! !

!methodRemoval: StoreTestObjectsFactory #debit:from: stamp: 'DS 11/29/2020 17:34:51'!
debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard.!

!classDefinition: #FacadeTusLibrosTest category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 17:35:14'!
TestCase subclass: #FacadeTusLibrosTest
	instanceVariableNames: 'testObjectsFactory debitBehavior'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!FacadeTusLibrosTest methodsFor: 'setup' stamp: 'DS 11/29/2020 17:35:13'!
debit: anAmount from: aCreditCard 

	^debitBehavior value: anAmount value: aCreditCard ! !
!FacadeTusLibrosTest methodsFor: 'setup' stamp: 'DS 11/29/2020 17:35:28' prior: 50881785 overrides: 16927572!
setUp

	testObjectsFactory := StoreTestObjectsFactory new.
	debitBehavior := [ :anAmount :aCreditCard | ].! !
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 17:37:01' prior: 50882292!
test08

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := July,2021.
	creditCardNumber := '1234123412341234'.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	self assert: 10 equals: (tusLibros checkOutCart: cartID withCCN: creditCardNumber withCCED: creditCardExpirationDate andCCO: creditCardOwner throught: self).! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:37:44'!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor

	^10.
! !

!methodRemoval: FacadeTusLibros #checkOutCart:withCCN:withCCED:andCCO: stamp: 'DS 11/29/2020 17:37:47'!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO

	^10.
!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 17:37:50'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 17:37:50'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 17:39:53'!
test09

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := July,2021.
	creditCardNumber := '1234123412341234'.
	
	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [tusLibros checkOutCart: cartID withCCN: creditCardNumber withCCED: creditCardExpirationDate andCCO: creditCardOwner throught: self]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 17:39:54'!
FAILURE!

TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCardTest category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 17:45:52'!
TestCase subclass: #CreditCardTest
	instanceVariableNames: ''
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCardTest methodsFor: 'no messages' stamp: 'DS 11/29/2020 17:46:35'!
assertCreateCreditCardWithNumber: anNumber withExpirationDate: anExpirationDate andOwner: anOwner shouldRaiseErrorDescription: anErrorDescription 

	self should: [ CreditCard withNumber: anNumber withExpirationDate: anExpirationDate andOwner: anOwner . ]
		raise: Error
		withMessageText: anErrorDescription.! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:47:07'!
test02CreditCardOwnerCanNotBeEmpty

	self 
		assertCreateCreditCardWithNumber: '1234123412341234'
		withExpirationDate:  February, 2021
		andOwner:  ''
		shouldRaiseErrorDescription: CreditCard invalidOwnerErrorDescription.! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:47:36'!
test01CreditCardNumberShouldHave16Characters

	self
		assertCreateCreditCardWithNumber: '123412341234123'
		withExpirationDate: February, 2021
		andOwner: 'FedeSaba S.A.'
		shouldRaiseErrorDescription: CreditCard invalidNumberErrorDescription.! !

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 17:48:56'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!

!classDefinition: #CreditCard category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 17:48:57'!
Object subclass: #CreditCard
	instanceVariableNames: 'expiration number owner'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!CreditCard methodsFor: 'initialization' stamp: 'DS 11/29/2020 17:48:54'!
initializeWithNumber: aCreditCardNumber withOwner: anOwner expiringOn: anExpirationDate

	number := aCreditCardNumber.
	expiration := anExpirationDate.
	owner := anOwner.! !
!CreditCard class methodsFor: 'instance creation' stamp: 'DS 11/29/2020 17:51:05'!
assertValidCreditCardNumber: aCreditCardNumber

	^(aCreditCardNumber size = 16) ifFalse: [ self error: self invalidNumberErrorDescription ].! !
!CreditCard class methodsFor: 'assertions' stamp: 'DS 11/29/2020 17:51:28'!
assertValidOwner: anOwner

	^anOwner ifEmpty: [ self error: self invalidOwnerErrorDescription ].! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/29/2020 17:51:53'!
invalidExpirationDateErrorDescription

    ^'Invalid format of Expiration Date'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/29/2020 17:51:58'!
invalidNumberErrorDescription

    ^'Invalid number of credit card'.! !
!CreditCard class methodsFor: 'error descriptions' stamp: 'DS 11/29/2020 17:52:04'!
invalidOwnerErrorDescription

    ^'Owner can not be empty'.! !
!CreditCard class methodsFor: 'instance creation' stamp: 'DS 11/29/2020 17:53:28'!
withNumber: aNumber withOwner: anOwner expiringOn: aMonth

    self assertValidCreditCardNumber: aNumber.
    self assertValidOwner: anOwner.

    ^self new initializeWithNumber: aNumber withOwner: anOwner expiringOn: aMonth.! !
!CreditCard methodsFor: 'initialization' stamp: 'DS 11/29/2020 17:53:42' prior: 50882567!
initializeWithNumber: aCreditCardNumber withOwner: anOwner expiringOn: aMonth

	number := aCreditCardNumber.
	expiration := aMonth.
	owner := anOwner.! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:54:29'!
assertCreateCreditCardWithNumber: anNumber andOwner: anOwner expiringOn: aMonth shouldRaiseErrorDescription: anErrorDescription 

	self should: [ CreditCard withNumber: anNumber withOwner: anOwner expiringOn: aMonth. ]
		raise: Error
		withMessageText: anErrorDescription.! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:54:55'!
assertCreateCreditCardWithNumber: anNumber withOwner: anOwner expiringOn: aMonth shouldRaiseErrorDescription: anErrorDescription 

	self should: [ CreditCard withNumber: anNumber withOwner: anOwner expiringOn: aMonth. ]
		raise: Error
		withMessageText: anErrorDescription.! !

!methodRemoval: CreditCardTest #assertCreateCreditCardWithNumber:andOwner:expiringOn:shouldRaiseErrorDescription: stamp: 'DS 11/29/2020 17:54:55'!
assertCreateCreditCardWithNumber: anNumber andOwner: anOwner expiringOn: aMonth shouldRaiseErrorDescription: anErrorDescription 

	self should: [ CreditCard withNumber: anNumber withOwner: anOwner expiringOn: aMonth. ]
		raise: Error
		withMessageText: anErrorDescription.!
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:55:13' prior: 50882541!
test01CreditCardNumberShouldHave16Characters

	self
		assertCreateCreditCardWithNumber: '123412341234123'
		withOwner: 'FedeSaba S.A.'
		expiringOn: February, 2021
		shouldRaiseErrorDescription: CreditCard invalidNumberErrorDescription.! !
!CreditCardTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 17:55:28' prior: 50882531!
test02CreditCardOwnerCanNotBeEmpty

	self 
		assertCreateCreditCardWithNumber: '1234123412341234'
		withOwner:  ''
		expiringOn:  February, 2021
		shouldRaiseErrorDescription: CreditCard invalidOwnerErrorDescription.! !

!testRun: #CreditCardTest #test02CreditCardOwnerCanNotBeEmpty stamp: 'DS 11/29/2020 17:55:30'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardNumberShouldHave16Characters stamp: 'DS 11/29/2020 17:55:30'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardOwnerCanNotBeEmpty stamp: 'DS 11/29/2020 17:55:30'!
PASSED!

!methodRemoval: CreditCardTest #assertCreateCreditCardWithNumber:withExpirationDate:andOwner:shouldRaiseErrorDescription: stamp: 'DS 11/29/2020 17:55:34'!
assertCreateCreditCardWithNumber: anNumber withExpirationDate: anExpirationDate andOwner: anOwner shouldRaiseErrorDescription: anErrorDescription 

	self should: [ CreditCard withNumber: anNumber withExpirationDate: anExpirationDate andOwner: anOwner . ]
		raise: Error
		withMessageText: anErrorDescription.!

!methodRemoval: CreditCard #initializeExpiringOn: stamp: 'DS 11/29/2020 17:56:45'!
initializeExpiringOn: aMonth 
	
	expiration := aMonth !

!methodRemoval: CreditCard class #expiringOn: stamp: 'DS 11/29/2020 17:56:52'!
expiringOn: aMonth 
	
	^self new initializeExpiringOn: aMonth!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 17:57:36' prior: 50882167!
expiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: (Month month: today monthIndex year: today yearNumber - 1)! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 17:57:46' prior: 50882174!
notExpiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: (Month month: today monthIndex year: today yearNumber + 1).! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 17:57:49'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardNumberShouldHave16Characters stamp: 'DS 11/29/2020 17:57:51'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardOwnerCanNotBeEmpty stamp: 'DS 11/29/2020 17:57:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 17:57:53'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 17:57:53'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 17:57:53'!
FAILURE!

----SNAPSHOT----(29 November 2020 17:57:57) CuisUniversity-4384.image priorSource: 17589508!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 17:58:24'!
FAILURE!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:03:50'!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor on: aDate

	| creditCard cart cashier |

	creditCard := CreditCard withNumber: anCCN withOwner: anCCO expiringOn: anCCED.
	cart := carts at: aCartID.
	cashier := Cashier toCheckout: cart charging: creditCard throught: aMerchantProccesor on: aDate registeringOn: (OrderedCollection new).

	^cashier checkOut.! !
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 18:04:30' prior: 50882474!
test09

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := July,2021.
	creditCardNumber := '1234123412341234'.
	
	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: creditCardNumber
			withCCED: creditCardExpirationDate
			andCCO: creditCardOwner
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:04:31'!
FAILURE!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:05:26'!
expiredCreditCardDate
	
	^Month month: today monthIndex year: today yearNumber - 1! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:05:34' prior: 50882715!
expiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: self expiredCreditCard ! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:05:35'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:05:35'!
PASSED!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:05:49' prior: 50882853!
expiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: (self expiredCreditCard )! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:05:51'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:05:51'!
PASSED!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:06:04' prior: 50882867!
expiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: self expiredCreditCardDate! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:06:06'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:06:06'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 18:06:06'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 18:06:06'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 18:06:06'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 18:06:06'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 18:06:25' prior: 50882813!
test09

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := testObjectsFactory expiredCreditCardDate.
	creditCardNumber := '1234123412341234'.
	
	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: creditCardNumber
			withCCED: creditCardExpirationDate
			andCCO: creditCardOwner
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:06:31'!
FAILURE!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:07:07'!
notExpiredCreditCardDate
	
	^Month month: today monthIndex year: today yearNumber + 1.! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:07:16' prior: 50882724!
notExpiredCreditCard
	
	^CreditCard 
		withNumber: '1234123412341234'
		withOwner: 'an owner'
		expiringOn: self notExpiredCreditCardDate.! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 18:07:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:07:19'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:07:19'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:07:19'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 18:07:32' prior: 50882908!
test09

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := testObjectsFactory notExpiredCreditCardDate.
	creditCardNumber := '1234123412341234'.
	
	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: creditCardNumber
			withCCED: creditCardExpirationDate
			andCCO: creditCardOwner
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:07:33'!
PASSED!

----SNAPSHOT----(29 November 2020 18:07:36) CuisUniversity-4384.image priorSource: 17636494!
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 18:10:19' prior: 50882411!
test08

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner checkout |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := testObjectsFactory notExpiredCreditCardDate.
	creditCardNumber := '1234123412341234'.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	checkout := tusLibros checkOutCart: cartID
				withCCN: creditCardNumber
				withCCED: creditCardExpirationDate
				andCCO: creditCardOwner
				throught: self
				on: testObjectsFactory today.

	self assert: 10 equals: (tusLibros checkOutCart: cartID withCCN: creditCardNumber withCCED: creditCardExpirationDate andCCO: creditCardOwner throught: self).! !
!FacadeTusLibrosTest methodsFor: 'tests' stamp: 'DS 11/29/2020 18:10:28' prior: 50883076!
test08

	| tusLibros cartID authenticator creditCardNumber creditCardExpirationDate creditCardOwner checkout |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	creditCardOwner := 'S.A.'.
	creditCardExpirationDate := testObjectsFactory notExpiredCreditCardDate.
	creditCardNumber := '1234123412341234'.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	checkout := tusLibros checkOutCart: cartID
				withCCN: creditCardNumber
				withCCED: creditCardExpirationDate
				andCCO: creditCardOwner
				throught: self
				on: testObjectsFactory today.

	self assert: 10 equals: checkout.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:10:30'!
PASSED!

----SNAPSHOT----(29 November 2020 18:10:33) CuisUniversity-4384.image priorSource: 17645511!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:11:41'!
credotCardOwner

	^'an buisines S.A.'.! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:11:45'!
creditCardOwner

	^'an buisines S.A.'.! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:11:52'!
creditCardNumber

	^'1234123412341234'.! !

!methodRemoval: StoreTestObjectsFactory #credotCardOwner stamp: 'DS 11/29/2020 18:11:54'!
credotCardOwner

	^'an buisines S.A.'.!
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:12:09' prior: 50882881!
expiredCreditCard
	
	^CreditCard 
		withNumber: self creditCardNumber 
		withOwner: self creditCardOwner 
		expiringOn: self expiredCreditCardDate! !
!StoreTestObjectsFactory methodsFor: 'credit card' stamp: 'DS 11/29/2020 18:12:21' prior: 50882949!
notExpiredCreditCard
	
	^CreditCard 
		withNumber: self creditCardNumber 
		withOwner: self creditCardOwner 
		expiringOn: self notExpiredCreditCardDate.! !

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 18:12:23'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:12:24'!
PASSED!

----SNAPSHOT----(29 November 2020 18:12:27) CuisUniversity-4384.image priorSource: 17648540!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:14:33' prior: 50883108!
test08

	| tusLibros cartID authenticator checkout |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	checkout := tusLibros checkOutCart: cartID
				withCCN: testObjectsFactory creditCardNumber 
				withCCED: testObjectsFactory notExpiredCreditCardDate 
				andCCO: testObjectsFactory creditCardOwner
				throught: self
				on: testObjectsFactory today.

	self assert: 10 equals: checkout.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:14:39'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:14:39'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:15:13' prior: 50883009!
test09

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:15:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:15:17'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:17:48'!
test10CannotCheckoutToUnknownCartID

	| tusLibros cartID authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !
!FacadeTusLibros class methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:18:17' prior: 50882091!
unknownCartIDErrorDescription
	^ 'Unknowed cart ID'.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:18:23'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:18:23'!
FAILURE!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:19:06' prior: 50882797!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor on: aDate

	| creditCard cart cashier |
	
	(carts includesKey: aCartID) ifFalse: [self error: self class unknownCartIDErrorDescription ].

	creditCard := CreditCard withNumber: anCCN withOwner: anCCO expiringOn: anCCED.
	cart := carts at: aCartID.
	cashier := Cashier toCheckout: cart charging: creditCard throught: aMerchantProccesor on: aDate registeringOn: (OrderedCollection new).

	^cashier checkOut.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:19:07'!
FAILURE!

!methodRemoval: FacadeTusLibros #checkOutCart:withCCN:withCCED:andCCO:throught: stamp: 'DS 11/29/2020 18:19:20'!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor

	^10.
!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:19:43' prior: 50883373!
test10CannotCheckoutToUnknownCartID

	| tusLibros authenticator |

	authenticator := Dictionary with: 1 -> 'password'.
	tusLibros := FacadeTusLibros with: authenticator and: testObjectsFactory defaultCatalog.

	self should: [
		tusLibros checkOutCart: 1
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:19:47'!
PASSED!

----SNAPSHOT----(29 November 2020 18:19:52) CuisUniversity-4384.image priorSource: 17651283!
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:21:02'!
signalUnknownCartID

	^ self error: self class unknownCartIDErrorDescription! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:21:02' prior: 50883411!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor on: aDate

	| creditCard cart cashier |
	
	(carts includesKey: aCartID) ifFalse: [self signalUnknownCartID ].

	creditCard := CreditCard withNumber: anCCN withOwner: anCCO expiringOn: anCCED.
	cart := carts at: aCartID.
	cashier := Cashier toCheckout: cart charging: creditCard throught: aMerchantProccesor on: aDate registeringOn: (OrderedCollection new).

	^cashier checkOut.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:21:20'!
assertUnkownCartID: aCartID

	^ (carts includesKey: aCartID) ifFalse: [self signalUnknownCartID ]! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:21:20' prior: 50883507!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor on: aDate

	| creditCard cart cashier |
	
	self assertUnkownCartID: aCartID.

	creditCard := CreditCard withNumber: anCCN withOwner: anCCO expiringOn: anCCED.
	cart := carts at: aCartID.
	cashier := Cashier toCheckout: cart charging: creditCard throught: aMerchantProccesor on: aDate registeringOn: (OrderedCollection new).

	^cashier checkOut.! !
!FacadeTusLibros methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:22:10' prior: 50882059!
addToCart: aCartID aQuantity: aQuantity of: anItem
	
	| aCart |

	self assertUnkownCartID: aCartID.	

	aCart := carts at: aCartID.
	aCart add: aQuantity of: anItem.
	
	! !
!StoreTestObjectsFactory methodsFor: 'tusLibros' stamp: 'DS 11/29/2020 18:28:49'!
tusLibrosFacadeInstance

	| authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.

	^FacadeTusLibros with: authenticator and: self defaultCatalog.! !
!StoreTestObjectsFactory methodsFor: 'tusLibros' stamp: 'DS 11/29/2020 18:28:59'!
tusLibrosFacade

	| authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.

	^FacadeTusLibros with: authenticator and: self defaultCatalog.! !

!methodRemoval: StoreTestObjectsFactory #tusLibrosFacadeInstance stamp: 'DS 11/29/2020 18:29:01'!
tusLibrosFacadeInstance

	| authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.

	^FacadeTusLibros with: authenticator and: self defaultCatalog.!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:29:26' prior: 50881651!
test01CreateCartHaveEmptyList

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibrosFacade.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:29:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:29:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:29:30'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:29:57' prior: 50881666!
test02CannotCreateCartWithInvalidPassword

	| tusLibros |

	tusLibros := testObjectsFactory tusLibrosFacade.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!StoreTestObjectsFactory methodsFor: 'tusLibros' stamp: 'DS 11/29/2020 18:30:39'!
tusLibros

	| authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.

	^FacadeTusLibros with: authenticator and: self defaultCatalog.! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:30:39' prior: 50883584!
test01CreateCartHaveEmptyList

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	self assert: (Dictionary new) equals: (tusLibros listCartFor: cartID).! !
!FacadeTusLibrosTest methodsFor: 'as yet unclassified' stamp: 'DS 11/29/2020 18:30:39' prior: 50883668!
test02CannotCreateCartWithInvalidPassword

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ tusLibros createCartForUser: 1 withPassword: 'bad password'.]
		raise: Error
 		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

!methodRemoval: StoreTestObjectsFactory #tusLibrosFacade stamp: 'DS 11/29/2020 18:30:39'!
tusLibrosFacade

	| authenticator |

	authenticator := Dictionary with: 1 -> 'pass' with: 2 -> 'pass'.

	^FacadeTusLibros with: authenticator and: self defaultCatalog.!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:30:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardNumberShouldHave16Characters stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardOwnerCanNotBeEmpty stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:30:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:30:44'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:30:56' prior: 50881682!
test03CannotCreateCartWithUnknownUser

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ tusLibros createCartForUser: 2 withPassword: 'password'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:30:58'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:30:58'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:31:15' prior: 50881697!
test04CannotAssignSameIDForDifferentCarts

	| tusLibros cartID cartID2 |

	tusLibros := testObjectsFactory tusLibros.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	cartID2 := tusLibros createCartForUser: 2 withPassword: 'pass'.

	self assert: (cartID ~= cartID2).! !

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:31:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:31:28'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:31:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:31:30'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:31:45' prior: 50883846!
test03CannotCreateCartWithUnknownUser

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ tusLibros createCartForUser: 2 withPassword: 'pass'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'adding' stamp: 'DS 11/29/2020 18:32:15' prior: 50881714!
test05AddedItemIsIncludedInCartList

	| tusLibros cartID expectedCartList |

	expectedCartList := Dictionary with: testObjectsFactory itemSellByTheStore -> 1.

	tusLibros := testObjectsFactory tusLibros.	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	self assert: expectedCartList equals: (tusLibros listCartFor: cartID).! !

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:32:17'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:32:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:32:17'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:32:34' prior: 50884017!
test03CannotCreateCartWithUnknownUser

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ tusLibros createCartForUser: 2 withPassword: 'password'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'create' stamp: 'DS 11/29/2020 18:32:41' prior: 50884085!
test03CannotCreateCartWithUnknownUser

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ tusLibros createCartForUser: 3 withPassword: 'pass'. ]
		raise: Error
		withMessageText: FacadeTusLibros badAuthenticationErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:32:42'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:32:45'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:32:45'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'adding' stamp: 'DS 11/29/2020 18:33:29' prior: 50881735!
test06AddedItemsInDifferentsCartsAreInRespectiveLists

	| tusLibros firstCartID secondCartID expectedFirstCart expectedSecondCart |

	expectedFirstCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 5.
	expectedSecondCart := Dictionary with: testObjectsFactory itemSellByTheStore -> 10.

	tusLibros := testObjectsFactory tusLibros.	
	firstCartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	secondCartID := tusLibros createCartForUser: 2 withPassword: 'pass'.

	tusLibros addToCart: firstCartID aQuantity: 5 of: testObjectsFactory itemSellByTheStore.
	tusLibros addToCart: secondCartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: expectedFirstCart equals: (tusLibros listCartFor: firstCartID).
	self assert: expectedSecondCart equals: (tusLibros listCartFor: secondCartID).! !

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:33:30'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:33:31'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:33:31'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:33:31'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:33:31'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:33:31'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'adding' stamp: 'DS 11/29/2020 18:33:44' prior: 50881769!
test07CannotAddToUnknownCartID

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [tusLibros addToCart: 1 aQuantity: 5 of: testObjectsFactory itemSellByTheStore]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:34:01' prior: 50883257!
test08

	| tusLibros cartID checkout |

	tusLibros := testObjectsFactory tusLibros.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	checkout := tusLibros checkOutCart: cartID
				withCCN: testObjectsFactory creditCardNumber 
				withCCED: testObjectsFactory notExpiredCreditCardDate 
				andCCO: testObjectsFactory creditCardOwner
				throught: self
				on: testObjectsFactory today.

	self assert: 10 equals: checkout.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:34:03'!
ERROR!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:34:30' prior: 50884228!
test08

	| tusLibros cartID checkout |

	tusLibros := testObjectsFactory tusLibros.
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	checkout := tusLibros checkOutCart: cartID
				withCCN: testObjectsFactory creditCardNumber 
				withCCED: testObjectsFactory notExpiredCreditCardDate 
				andCCO: testObjectsFactory creditCardOwner
				throught: self
				on: testObjectsFactory today.

	self assert: 10 equals: checkout.! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:34:45' prior: 50883313!
test09

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'password'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:35:01' prior: 50884271!
test09

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self should: [
		tusLibros checkOutCart: cartID 
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:35:15' prior: 50883441!
test10CannotCheckoutToUnknownCartID

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [
		tusLibros checkOutCart: 1
			withCCN: testObjectsFactory creditCardNumber 
			withCCED: testObjectsFactory notExpiredCreditCardDate
			andCCO: testObjectsFactory creditCardOwner 
			throught: self
			on: testObjectsFactory today
		]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:35:17'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:35:17'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:44:41'!
tusLibros: aFacadeTusLibros checkoutCartID: aCartID

	^aFacadeTusLibros
		checkOutCart: aCartID
		withCCN: testObjectsFactory creditCardNumber 
		withCCED: testObjectsFactory notExpiredCreditCardDate 
		andCCO: testObjectsFactory creditCardOwner
		throught: self
		on: testObjectsFactory today.! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:45:31' prior: 50884251!
test08

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 10 equals: (self tusLibros: tusLibros checkoutCartID: cartID).! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:45:33'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:45:33'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:46:26' prior: 50884295!
test09

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:46:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:46:26'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 18:46:43' prior: 50884319!
test10CannotCheckoutToUnknownCartID

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ self tusLibros: tusLibros checkoutCartID: 1 ]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:46:44'!
PASSED!

----SNAPSHOT----(29 November 2020 18:46:47) CuisUniversity-4384.image priorSource: 17659093!
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'DS 11/29/2020 18:52:50'!
signalBadAuthentication

	^ self error: self class badAuthenticationErrorDescription! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'DS 11/29/2020 18:52:50' prior: 50882044!
createCartForUser: anID withPassword: aPassword 

	authenticator at: anID ifAbsent: [self signalBadAuthentication ].
	((authenticator at: anID) = aPassword) ifFalse: [self error: self class badAuthenticationErrorDescription].
	
	currentID := currentID + 1.
	carts at: currentID put: (Cart acceptingItemsOf: catalog).

	^currentID.! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'DS 11/29/2020 18:54:24' prior: 50884544!
createCartForUser: anID withPassword: aPassword 

	( (authenticator includesKey: anID) not or: [(authenticator at: anID) ~= aPassword]) ifTrue: [self error: self class badAuthenticationErrorDescription].
	
	currentID := currentID + 1.
	carts at: currentID put: (Cart acceptingItemsOf: catalog).

	^currentID.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 18:54:25'!
PASSED!

d := Dictionary with: 1 -> 'p'.!

d includes: 1->'p'!

d includes: 1!

d includes: 'p'!
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'DS 11/29/2020 19:00:47'!
assertAuthenticate: anID withPassword: aPassword

	( (authenticator includesKey: anID) not or: [(authenticator at: anID) ~= aPassword] 	)
		ifTrue: [self error: self class badAuthenticationErrorDescription].
! !
!FacadeTusLibros methodsFor: 'create - auth' stamp: 'DS 11/29/2020 19:01:02' prior: 50884558!
createCartForUser: anID withPassword: aPassword 

	self assertAuthenticate: anID withPassword: aPassword.
	
	currentID := currentID + 1.
	carts at: currentID put: (Cart acceptingItemsOf: catalog).

	^currentID.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:01:05'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:01:05'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:08:04' prior: 50884488!
test10CannotCheckoutToUnknownCartID

	| tusLibros |

	tusLibros := testObjectsFactory tusLibros.

	self should: [ self tusLibros: tusLibros checkoutCartID: 1 ]
		raise: Error
		withMessageText: FacadeTusLibros unknownCartIDErrorDescription.
		
	self assert: tusLibros salesBook isEmpty.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:08:09'!
ERROR!
!FacadeTusLibros methodsFor: 'accessing' stamp: 'DS 11/29/2020 19:08:13'!
salesBook
	self shouldBeImplemented.! !

!classDefinition: #FacadeTusLibros category: 'TusLibros-Solucion' stamp: 'DS 11/29/2020 19:08:24'!
Object subclass: #FacadeTusLibros
	instanceVariableNames: 'authenticator carts currentID catalog salesBook'
	classVariableNames: ''
	poolDictionaries: ''
	category: 'TusLibros-Solucion'!
!FacadeTusLibros methodsFor: 'accessing' stamp: 'DS 11/29/2020 19:08:20' prior: 50884675!
salesBook

	^salesBook.! !

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:08:27'!
ERROR!
!FacadeTusLibros methodsFor: 'initialization' stamp: 'DS 11/29/2020 19:08:45' prior: 50882031!
initializeWith: anAuthenticator and: aCatalog 

	authenticator := anAuthenticator.
	carts := Dictionary new. 
	catalog := aCatalog.
	currentID := 0.
	salesBook := OrderedCollection new.! !

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:08:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:08:47'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:19:57' prior: 50884385!
test08

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 10 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
		self assert: (OrderedCollection with : Sale of: 10) equals: tusLibros salesBook.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:19:58'!
ERROR!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:20:07'!
ERROR!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:21:14' prior: 50884740!
test08

	| tusLibros cartID expectedSalesBook |

	expectedSalesBook := OrderedCollection with: (Sale of: 100).
	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 10 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: expectedSalesBook equals: tusLibros salesBook.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:14'!
FAILURE!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:21:24' prior: 50884761!
test08

	| tusLibros cartID expectedSalesBook |

	expectedSalesBook := OrderedCollection with: (Sale of: 100).
	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 100 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: expectedSalesBook equals: tusLibros salesBook.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:24'!
FAILURE!
!FacadeTusLibros methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:21:47' prior: 50883532!
checkOutCart: aCartID withCCN: anCCN withCCED: anCCED andCCO: anCCO throught: aMerchantProccesor on: aDate

	| creditCard cart cashier |
	
	self assertUnkownCartID: aCartID.

	creditCard := CreditCard withNumber: anCCN withOwner: anCCO expiringOn: anCCED.
	cart := carts at: aCartID.
	cashier := Cashier toCheckout: cart charging: creditCard throught: aMerchantProccesor on: aDate registeringOn: salesBook.

	^cashier checkOut.! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:49'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:51'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:21:51'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:51'!
FAILURE!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:21:54'!
FAILURE!

expectedSalesBook!

tusLibros salesBook!

tusLibros salesBook!

self size!

self includes: (Sale of: 100)!

self includes: (Sale of: 10)!

self !

self at: 1!

self at: 1!

self at: 1 total!

(self at: 1 )total!

tusLibros salesBook!

self!

self first!

self first total!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:26:35' prior: 50884781!
test08

	| tusLibros cartID expectedSalesBook |

	expectedSalesBook := OrderedCollection with: (Sale of: 100).
	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 100 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: 100 equals: (tusLibros salesBook first total).
	self assert: 1 equals: (tusLibros salesBook size).! !
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:26:45' prior: 50884870!
test08

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 100 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: 100 equals: (tusLibros salesBook first total).
	self assert: 1 equals: (tusLibros salesBook size).! !

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:26:47'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:26:47'!
PASSED!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:27:23' prior: 50884434!
test09

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assert: tusLibros salesBook isEmpty.! !

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test01NewCartsAreCreatedEmpty stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test02CanNotAddItemsThatDoNotBelongToStore stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test03AfterAddingAnItemTheCartIsNotEmptyAnymore stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test04CanNotAddNonPositiveNumberOfItems stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test05CanNotAddMoreThanOneItemNotSellByTheStore stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test06CartRemembersAddedItems stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test07CartDoesNotHoldNotAddedItems stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CartTest #test08CartRemembersTheNumberOfAddedItems stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test01CanNotCheckoutAnEmptyCart stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test02CalculatedTotalIsCorrect stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test03CanNotCheckoutWithAnExpiredCreditCart stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test04CheckoutRegistersASale stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test05CashierChargesCreditCardUsingMerchantProcessor stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CashierTest #test06CashierDoesNotSaleWhenTheCreditCardHasNoCredit stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CreditCardTest #test01CreditCardNumberShouldHave16Characters stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #CreditCardTest #test02CreditCardOwnerCanNotBeEmpty stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test01CreateCartHaveEmptyList stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test02CannotCreateCartWithInvalidPassword stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test03CannotCreateCartWithUnknownUser stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test04CannotAssignSameIDForDifferentCarts stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test05AddedItemIsIncludedInCartList stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test06AddedItemsInDifferentsCartsAreInRespectiveLists stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test07CannotAddToUnknownCartID stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

!testRun: #FacadeTusLibrosTest #test10CannotCheckoutToUnknownCartID stamp: 'DS 11/29/2020 19:27:26'!
PASSED!

----SNAPSHOT----(29 November 2020 19:27:28) CuisUniversity-4384.image priorSource: 17692296!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:31:24'!
test08CheckoutShouldBeRegisterInSalesBook

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 100 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: 100 equals: (tusLibros salesBook first total).
	self assert: 1 equals: (tusLibros salesBook size).! !

!methodRemoval: FacadeTusLibrosTest #test08 stamp: 'DS 11/29/2020 19:31:24'!
test08

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.
	
	tusLibros addToCart: cartID aQuantity: 10 of: testObjectsFactory itemSellByTheStore.
	
	self assert: 100 equals: (self tusLibros: tusLibros checkoutCartID: cartID).
	self assert: 100 equals: (tusLibros salesBook first total).
	self assert: 1 equals: (tusLibros salesBook size).!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:31:45'!
test09CannotCheckoutWhnCreditCardHasNoCredit

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assert: tusLibros salesBook isEmpty.! !

!methodRemoval: FacadeTusLibrosTest #test09 stamp: 'DS 11/29/2020 19:31:45'!
test09

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assert: tusLibros salesBook isEmpty.!

----SNAPSHOT----(29 November 2020 19:31:49) CuisUniversity-4384.image priorSource: 17708716!
!FacadeTusLibrosTest methodsFor: 'checkout' stamp: 'DS 11/29/2020 19:31:54'!
test09CannotCheckoutWhnCreditCardHasNotCredit

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assert: tusLibros salesBook isEmpty.! !

!methodRemoval: FacadeTusLibrosTest #test09CannotCheckoutWhnCreditCardHasNoCredit stamp: 'DS 11/29/2020 19:31:54'!
test09CannotCheckoutWhnCreditCardHasNoCredit

	| tusLibros cartID |

	tusLibros := testObjectsFactory tusLibros.
	cartID := tusLibros createCartForUser: 1 withPassword: 'pass'.

	tusLibros addToCart: cartID aQuantity: 1 of: testObjectsFactory itemSellByTheStore.

	debitBehavior := [ :anAmount :aCreditCard | self error: Cashier creditCardHasNoCreditErrorMessage].
	
	self should: [ self tusLibros: tusLibros checkoutCartID: cartID ]
		raise: Error
		withMessageText: Cashier creditCardHasNoCreditErrorMessage.
		
	self assert: tusLibros salesBook isEmpty.!

----SNAPSHOT----(29 November 2020 19:47:33) CuisUniversity-4384.image priorSource: 17711109!